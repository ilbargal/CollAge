var collAgeApp = angular.module('collAgeApp', ['ngRoute', 'auth0', 'angular-storage', 'angular-jwt', 'collAgeDirectives']);collAgeApp.config(function (authProvider) {  authProvider.init({    domain: 'collage.auth0.com',    clientID: 'CJvEGDMZs53qqj0dUMOV62ZN65Oj3ARu'  });}).run(function(auth) {  // This hooks al auth events to check everything as soon as the app starts  auth.hookEvents();});// app.jscollAgeApp.config(function (authProvider, $routeProvider, $httpProvider, jwtInterceptorProvider) {  authProvider.on('loginSuccess', function($location, profilePromise, idToken, store) {    console.log("Login Success");    debugger;    profilePromise.then(function(profile) {      store.set('profile', profile);      store.set('token', idToken);    });    $location.path('/');  });  authProvider.on('loginFailure', function() {         // Error Callback  });  // We're annotating this function so that the `store` is injected correctly when this file is minified  jwtInterceptorProvider.tokenGetter = ['store', function(store) {    // Return the saved token    return store.get('token');  }];  $httpProvider.interceptors.push('jwtInterceptor');  // ...});collAgeApp.run(function($rootScope, auth, store, jwtHelper, $location) {  // This events gets triggered on refresh or URL change  $rootScope.$on('$locationChangeStart', function() {    var token = store.get('token');    if (token) {      if (!jwtHelper.isTokenExpired(token)) {        if (!auth.isAuthenticated) {          auth.authenticate(store.get('profile'), token);        }      } else {        // Either show the login page or use the refresh token to get a new idToken        $location.path('/');      }    }  });});collAgeApp.config(function($routeProvider) { $routeProvider     .when('/main', {      templateUrl : 'views/main.html',      controller  : 'mainController as mainCtrl'     })     .when('/profile', {      templateUrl : 'views/profile.html',      //controller  : 'aboutController',      requiresLogin: true     })     .when('/new-activity', {      templateUrl : 'views/new-activity.html',      //controller  : 'contactController',      requiresLogin: true     })     .when ('/event/:id', {      templateUrl: 'views/event-details.html',      controller: 'eventController',      requiresLogin: true,      resolve: {        canEdit: function() {            return true;        },        currEvent: function($route, eventService) {            var currEvent = eventService.getEventById($route.current.params.id);            return currEvent;        }      }     })     .otherwise({      redirectTo: '/main'     });});collAgeApp.controller('mainController',['$scope', 'eventService', 'auth', function($scope, eventService, auth) {    $scope.auth = auth;    $scope.isAdmin = false;    $scope.user = {};    $scope.activities = eventService.events();    $scope.signin = function() {        auth.signin({            popup: true,            chrome: true        });    }}]);collAgeApp.controller('eventController', ['$scope','currEvent','auth', function($scope, currEvent, auth) {    var eventCtrl = this;    $scope.auth = auth;    $scope.event = currEvent;    var map = new GMaps({                  el : '#map',                  lat: 32.146414,                  lng: 34.888305,                  zoom: 16                });//    map.addMarker({//          lat: 32.146414,//          lng: 34.888305,//          title: 'HHH',//          infoWindow: {//            content: '<p>HTML Content</p>'//          }//    });}]);